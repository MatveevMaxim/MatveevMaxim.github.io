<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Запрос возраста с проверкой</title>
</head>
<body>
  <h2>Возраст пользователя</h2>
  <button onclick="askAge()">Указать возраст</button>
  <p id="result" style="color: red;"></p>

  <script>
    function askAge() {
      let age;
      let confirmed = false;
      const resultElem = document.getElementById("result");
      resultElem.textContent = ""; // очистить предыдущее сообщение

      while (!confirmed) {
        age = prompt("Введите ваш возраст (число от 1 до 120):");

        if (age === null) {
          // Нажал Отмена — повторить запрос
          continue;
        }

        age = age.trim();

        if (age === "") {
          alert("Пожалуйста, введите значение! Поле не может быть пустым.");
          continue;
        }

        if (!/^\d+$/.test(age)) {
          alert("Пожалуйста, введите только цифры без пробелов и других символов.");
          continue;
        }

        let ageNumber = Number(age);

        if (ageNumber < 1 || ageNumber > 120) {
          alert("Возраст должен быть в диапазоне от 1 до 120.");
          continue;
        }

        confirmed = confirm(`Вы ввели возраст: ${ageNumber}. Всё верно?`);
      }

      resultElem.style.color = "black";
      resultElem.textContent = `Возраст подтверждён: ${age}`;
    }
  </script>
</body>
</html>
